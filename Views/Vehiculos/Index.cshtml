@model IEnumerable<ARSAN_Web.Models.Vehiculo>

@{
    ViewData["Title"] = "Vehículos";
}

<style>
    .table-container {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        margin-bottom: 2rem;
    }

    .table-responsive-custom {
        min-width: 100%;
    }

    .table {
        margin-bottom: 0;
        white-space: nowrap;
    }

        .table thead {
            position: sticky;
            top: 0;
            z-index: 10;
            background-color: #212529;
        }

        .table th {
            font-weight: 600;
            font-size: 0.9rem;
            padding: 1rem 0.75rem;
            vertical-align: middle;
        }

        .table td {
            padding: 0.85rem 0.75rem;
            vertical-align: middle;
        }

    .btn-group-actions {
        display: flex;
        gap: 0.25rem;
        flex-wrap: nowrap;
    }

    .btn-sm {
        padding: 0.375rem 0.75rem;
        font-size: 0.875rem;
        white-space: nowrap;
    }

    .badge-cluster {
        background-color: #0d6efd;
        color: white;
        padding: 0.4rem 0.8rem;
        border-radius: 6px;
        font-weight: 500;
        display: inline-block;
    }

    .badge-residencia {
        background-color: #198754;
        color: white;
        padding: 0.4rem 0.8rem;
        border-radius: 6px;
        font-weight: 500;
        display: inline-block;
    }

    /* Scrollbar personalizado */
    .table-container::-webkit-scrollbar {
        height: 10px;
    }

    .table-container::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 10px;
    }

    .table-container::-webkit-scrollbar-thumb {
        background: #888;
        border-radius: 10px;
    }

        .table-container::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

    .page-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
        flex-wrap: wrap;
        gap: 1rem;
    }

    @@media (max-width: 768px) {
        .page-header {
            flex-direction: column;
            align-items: flex-start;
        }
    }
</style>

<div class="page-header">
    <div>
        <h1>🚗 Vehículos</h1>
        <p class="text-muted mb-0">Gestión de vehículos registrados en el residencial</p>
    </div>
    <a asp-action="Create" class="btn btn-primary">
        <i class="bi bi-plus-circle"></i> Crear Nuevo Vehículo
    </a>
</div>

<div class="alert alert-info" role="alert">
    <strong>💡 Tip:</strong> Desliza horizontalmente la tabla para ver todos los datos si están cortados.
</div>

<div class="table-container">
    <table class="table table-striped table-hover table-responsive-custom">
        <thead class="table-dark">
            <tr>
                <th>Cluster</th>
                <th>Residencia</th>
                <th>@Html.DisplayNameFor(model => model.Marca)</th>
                <th>@Html.DisplayNameFor(model => model.Linea)</th>
                <th>@Html.DisplayNameFor(model => model.Anio)</th>
                <th>@Html.DisplayNameFor(model => model.Color)</th>
                <th>@Html.DisplayNameFor(model => model.Placa)</th>
                <th>@Html.DisplayNameFor(model => model.NumeroTarjeta)</th>
                <th style="min-width: 200px;">Acciones</th>
            </tr>
        </thead>
        <tbody>
            @if (Model.Any())
            {
                @foreach (var item in Model)
                {
                    <tr>
                        <td>
                            <span class="badge-cluster">
                                @Html.DisplayFor(modelItem => item.Residencia.Cluster.Nombre)
                            </span>
                        </td>
                        <td>
                            <span class="badge-residencia">
                                #@Html.DisplayFor(modelItem => item.Residencia.Numero)
                            </span>
                        </td>
                        <td>@Html.DisplayFor(modelItem => item.Marca)</td>
                        <td>@Html.DisplayFor(modelItem => item.Linea)</td>
                        <td>@Html.DisplayFor(modelItem => item.Anio)</td>
                        <td>
                            @if (!string.IsNullOrEmpty(item.Color))
                            {
                                <span style="display: inline-block; width: 20px; height: 20px; background-color: @item.Color; border: 1px solid #ccc; border-radius: 3px; vertical-align: middle; margin-right: 5px;"></span>
                                <span>@item.Color</span>
                            }
                        </td>
                        <td><strong>@Html.DisplayFor(modelItem => item.Placa)</strong></td>
                        <td>@Html.DisplayFor(modelItem => item.NumeroTarjeta)</td>
                        <td>
                            <div class="btn-group-actions">
                                <a asp-action="Edit" asp-route-id="@item.IdVehiculo" class="btn btn-sm btn-warning" title="Editar">
                                    ✏️ Editar
                                </a>
                                <a asp-action="Details" asp-route-id="@item.IdVehiculo" class="btn btn-sm btn-info" title="Ver detalles">
                                    👁️ Ver
                                </a>
                                <a asp-action="Delete" asp-route-id="@item.IdVehiculo" class="btn btn-sm btn-danger" title="Eliminar">
                                    🗑️ Eliminar
                                </a>
                            </div>
                        </td>
                    </tr>
                }
            }
            else
            {
                <tr>
                    <td colspan="9" class="text-center text-muted py-4">
                        <p class="mb-0">📭 No hay vehículos registrados</p>
                        <a asp-action="Create" class="btn btn-primary btn-sm mt-2">Crear el primer vehículo</a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>

@if (Model.Any())
{
    <div class="alert alert-secondary mt-3">
        <strong>Total de vehículos:</strong> @Model.Count()
    </div>
}