@model ARSAN_Web.Models.AccesoVehicular

@{
    ViewData["Title"] = "Registrar Ingreso Vehicular";
}

<div class="mb-4">
    <h1>Registrar Ingreso de Vehículo</h1>
    <p class="text-muted">Complete los datos del vehículo que ingresa</p>
</div>

<div class="card shadow-sm">
    <div class="card-header bg-primary text-white">
        <h5 class="mb-0">Información del Acceso</h5>
    </div>
    <div class="card-body">
        <form asp-action="Create">
            <div asp-validation-summary="ModelOnly" class="alert alert-danger" role="alert"></div>

            <div class="row">
                <!-- Columna Izquierda -->
                <div class="col-md-6">
                    <div class="alert alert-info">
                        <strong>📋 Opción 1:</strong> Seleccione un vehículo registrado de residente<br />
                        <strong>📋 Opción 2:</strong> Seleccione un visitante conocido<br />
                        <strong>📋 Opción 3:</strong> Ingrese manualmente la placa del vehículo
                    </div>

                    <div class="form-group mb-3">
                        <label asp-for="IdVehiculo" class="form-label">Vehículo de Residente (Opcional)</label>
                        <select asp-for="IdVehiculo" class="form-select" asp-items="ViewBag.IdVehiculo">
                            <option value="">-- Seleccione si es vehículo registrado --</option>
                        </select>
                        <small class="form-text text-muted">La placa se llenará automáticamente</small>
                    </div>

                    <div class="form-group mb-3">
                        <label asp-for="IdVisitante" class="form-label">Visitante (Opcional)</label>
                        <select asp-for="IdVisitante" class="form-select" asp-items="ViewBag.IdVisitante">
                            <option value="">-- Seleccione si es visitante conocido --</option>
                        </select>
                    </div>

                    <div class="form-group mb-3">
                        <label asp-for="Placa" class="form-label">Placa del Vehículo</label>
                        <input asp-for="Placa" class="form-control" placeholder="Ej. P-123ABC" style="text-transform: uppercase;" />
                        <span asp-validation-for="Placa" class="text-danger"></span>
                        <small class="form-text text-muted">Ingrese manualmente si no es vehículo registrado</small>
                    </div>

                    <div class="form-group mb-3">
                        <label asp-for="TipoAcceso" class="form-label">Tipo de Acceso</label>
                        <select asp-for="TipoAcceso" class="form-select">
                            <option value="">-- Seleccione el tipo --</option>
                            <option value="Residente">🏠 Residente</option>
                            <option value="Visitante">🚶 Visitante</option>
                            <option value="Servicio">🔧 Servicio (plomero, electricista, etc.)</option>
                            <option value="Proveedor">📦 Proveedor/Delivery</option>
                            <option value="Emergencia">🚨 Emergencia</option>
                        </select>
                        <span asp-validation-for="TipoAcceso" class="text-danger"></span>
                    </div>
                </div>

                <!-- Columna Derecha -->
                <div class="col-md-6">
                    <div class="form-group mb-3">
                        <label asp-for="IdGarita" class="form-label">Garita de Ingreso</label>
                        <select asp-for="IdGarita" class="form-select" asp-items="ViewBag.IdGarita">
                            <option value="">-- Seleccione la garita --</option>
                        </select>
                        <span asp-validation-for="IdGarita" class="text-danger"></span>
                        <small class="form-text text-muted">Garita por donde ingresa el vehículo</small>
                    </div>

                    <div class="form-group mb-3">
                        <label asp-for="IdGuardiaIngreso" class="form-label">Guardia que Registra</label>
                        <select asp-for="IdGuardiaIngreso" class="form-select" asp-items="ViewBag.IdGuardiaIngreso">
                            <option value="">-- Seleccione el guardia --</option>
                        </select>
                        <span asp-validation-for="IdGuardiaIngreso" class="text-danger"></span>
                        <small class="form-text text-muted">Guardia de turno en la garita</small>
                    </div>

                    <div class="form-group mb-3">
                        <label asp-for="FechaIngreso" class="form-label">Fecha de Ingreso</label>
                        <input asp-for="FechaIngreso" type="date" class="form-control" />
                        <span asp-validation-for="FechaIngreso" class="text-danger"></span>
                    </div>

                    <div class="form-group mb-3">
                        <label asp-for="HoraIngreso" class="form-label">Hora de Ingreso</label>
                        <input asp-for="HoraIngreso" type="time" class="form-control" />
                        <span asp-validation-for="HoraIngreso" class="text-danger"></span>
                    </div>

                    <div class="form-group mb-3">
                        <label asp-for="Observaciones" class="form-label">Observaciones (Opcional)</label>
                        <textarea asp-for="Observaciones" class="form-control" rows="3" placeholder="Ej. Viene a visitar casa 45, trae mercadería, etc."></textarea>
                        <span asp-validation-for="Observaciones" class="text-danger"></span>
                    </div>
                </div>
            </div>

            <hr class="my-4" />

            <div class="d-flex justify-content-end gap-2">
                <a asp-action="Index" class="btn btn-secondary">Cancelar</a>
                <button type="submit" class="btn btn-primary">Registrar Ingreso</button>
            </div>
        </form>
    </div>
</div>

<div class="mt-3">
    <div class="alert alert-warning">
        <strong>⚠️ Importante:</strong> La salida del vehículo se registrará posteriormente desde la opción "Registrar Salida" en el listado.
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }

    <script>
        // Script para convertir la placa a mayúsculas automáticamente
        document.querySelector('input[name="Placa"]').addEventListener('input', function(e) {
            e.target.value = e.target.value.toUpperCase();
        });
    </script>
}